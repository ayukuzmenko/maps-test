{"version":3,"sources":["components/map/map.js","components/search-bar/search-bar.js","components/point/point.js","components/point-list/point-list.js","components/app.js","models/points.js","store/index.js","index.js"],"names":["Map","_Component","_getPrototypeOf2","_this","Object","classCallCheck","this","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","initMap","_map","window","ymaps","center","zoom","searchControlProvider","handlerDragEnd","event","mark","get","replacePoint","props","newCoords","geometry","getCoordinates","arrIndex","properties","inherits","createClass","key","value","react_default","a","createElement","id","className","ready","geoObjects","removeAll","addPoint","addPolyLine","_this2","points","forEach","point","index","Placemark","coords","iconCaption","adress","draggable","preset","iconCaptionMaxWidth","add","events","setBounds","getBounds","checkZoomRange","zoomMargin","linePoints","map","polyline","Polyline","balloonContent","balloonCloseButton","strokeColor","strokeWidth","strokeOpacity","Component","connect","state","dispatch","getNewCoords","SearchBar","initSearch","SuggestView","chekPointHandler","preventDefault","_inputAddress","name","type","ref","node","searchPoint","Point","deletePointHandler","deletePoint","item","onClick","PointList","dragEndHandler","result","destination","_this$props","reoderPoints","reorder","source","react_beautiful_dnd_esm","onDragEnd","droppableId","provided","snapshot","assign","innerRef","droppableProps","pointBody","placeholder","draggableId","draggableProps","dragHandleProps","list","startIndex","endIndex","from","_result$splice","splice","removed","slicedToArray","_ref","App","search_bar","point_list","models_points","reducers","payload","addNewPoint","push","newPointId","filter","effects","_searchPoint","asyncToGenerator","regenerator_default","_callee","wrap","_context","prev","next","geocode","then","res","geoObj","getAddressLine","Date","now","Math","random","toString","stop","_x","_getNewCoords","_callee2","_context2","_x2","immer","immerPlugin","store","init","models","plugins","ReactDOM","render","es","app","document","getElementById"],"mappings":"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","file":"static/js/main.c1abf966.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport './style.css';\n\nexport class Map extends Component {\n  initMap = () => {\n    this._map = new window.ymaps.Map(\n      'map',\n      {\n        center: [55.76, 37.64], // Москва\n        zoom: 10,\n      },\n      {\n        searchControlProvider: 'yandex#search',\n      },\n    );\n  };\n\n  handlerDragEnd = event => {\n    const mark = event.get('target');\n    const { replacePoint } = this.props;\n    const newCoords = mark.geometry.getCoordinates();\n    const arrIndex = mark.properties.get('arrIndex');\n    replacePoint({ arrIndex, newCoords });\n  };\n\n  render() {\n    return <div id=\"map\" className=\"containerMap\" />;\n  }\n\n  componentDidMount() {\n    window.ymaps.ready(this.initMap);\n  }\n\n  componentDidUpdate() {\n    this._map.geoObjects.removeAll();\n    this.addPoint();\n    this.addPolyLine();\n  }\n\n  addPoint() {\n    const { points } = this.props;\n\n    points.forEach((point, index) => {\n      const mark = new window.ymaps.Placemark(\n        point.coords,\n        {\n          iconCaption: point.adress,\n          arrIndex: index,\n        },\n        {\n          draggable: true,\n          preset: 'islands#darkBlueDotIconWithCaptio',\n          iconCaptionMaxWidth: '150',\n        },\n      );\n      this._map.geoObjects.add(mark);\n      mark.events.add(`dragend`, this.handlerDragEnd);\n    });\n\n    this._map.setBounds(this._map.geoObjects.getBounds(), {\n      checkZoomRange: true,\n      zoomMargin: 5,\n    });\n  }\n\n  addPolyLine() {\n    const { points } = this.props;\n\n    if (points.length <= 1) return;\n\n    const linePoints = points.map(point => point.coords);\n\n    const polyline = new window.ymaps.Polyline(\n      linePoints,\n      {\n        balloonContent: 'Маршрут',\n      },\n      {\n        balloonCloseButton: false,\n        strokeColor: '#000000',\n        strokeWidth: 3,\n        strokeOpacity: 0.5,\n      },\n    );\n\n    this._map.geoObjects.add(polyline);\n  }\n}\n\nconst mapStateProps = state => {\n  return {\n    points: state.points,\n  };\n};\n\nconst mapDispatch = dispatch => ({\n  replacePoint: dispatch.points.getNewCoords,\n});\n\nexport default connect(\n  mapStateProps,\n  mapDispatch,\n)(Map);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport './style.css';\n\nexport class SearchBar extends Component {\n  state = {\n    map: null,\n  };\n\n  initSearch = () => {\n    const suggest = new window.ymaps.SuggestView('suggest');\n    suggest.events.add(`select`, this.chekPointHandler);\n  };\n\n  chekPointHandler = event => {\n    event.preventDefault();\n    this.props.addPoint(event.get('item').value);\n    this._inputAddress.value = ``;\n  };\n\n  render() {\n    return (\n      <div>\n        <p className=\"header\">Введите адрес точки:</p>\n        <input\n          name=\"address\"\n          type=\"text\"\n          id=\"suggest\"\n          className=\"suggest\"\n          ref={node => (this._inputAddress = node)}\n        />\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    window.ymaps.ready(this.initSearch);\n  }\n}\n\nconst mapDispatch = dispatch => ({\n  addPoint: dispatch.points.searchPoint,\n});\n\nexport default connect(\n  null,\n  mapDispatch,\n)(SearchBar);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nexport class Point extends Component {\n  deletePointHandler = () => {\n    this.props.deletePoint(this.props.item.id);\n  };\n\n  render() {\n    const { item } = this.props;\n    return (\n      <div>\n        <span className=\"test\">{item.adress}</span>\n        <button onClick={this.deletePointHandler}>x</button>\n      </div>\n    );\n  }\n}\n\nconst mapDispatch = dispatch => {\n  return {\n    deletePoint: dispatch.points.deletePoint,\n  };\n};\n\nexport default connect(\n  null,\n  mapDispatch,\n)(Point);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport Point from '../point';\n\nexport class PointList extends Component {\n  dragEndHandler = result => {\n    if (!result.destination) {\n      return;\n    }\n\n    const { points, reoderPoints } = this.props;\n\n    const newOrderedPoints = reorder(points, result.source.index, result.destination.index);\n    reoderPoints(newOrderedPoints);\n  };\n\n  get pointBody() {\n    const { points } = this.props;\n\n    return points.map((item, index) => (\n      <Draggable key={item.id} draggableId={item.id} index={index}>\n        {(provided, snapshot) => (\n          <div ref={provided.innerRef} {...provided.draggableProps} {...provided.dragHandleProps}>\n            <Point item={item} />\n          </div>\n        )}\n      </Draggable>\n    ));\n  }\n\n  render() {\n    const { points } = this.props;\n\n    if (!points.length) {\n      return null;\n    }\n\n    return (\n      <DragDropContext onDragEnd={this.dragEndHandler}>\n        <Droppable droppableId=\"droppable\">\n          {(provided, snapshot) => (\n            <div ref={provided.innerRef} {...provided.droppableProps}>\n              {this.pointBody}\n              {provided.placeholder}\n            </div>\n          )}\n        </Droppable>\n      </DragDropContext>\n    );\n  }\n}\n\nconst reorder = (list, startIndex, endIndex) => {\n  const result = Array.from(list);\n  const [removed] = result.splice(startIndex, 1);\n  result.splice(endIndex, 0, removed);\n\n  return result;\n};\n\nconst mapStateToProps = state => ({\n  points: state.points,\n});\n\nconst mapDispatch = ({ points: { reoderPoints } }) => ({ reoderPoints });\n\nexport default connect(\n  mapStateToProps,\n  mapDispatch,\n)(PointList);\n","import React, { Component } from 'react';\nimport Map from './map';\nimport SearchBar from './search-bar';\nimport PointList from './point-list';\n\nclass App extends Component {\n  render() {\n    return (\n      <div>\n        <Map />\n        <div className=\"container\">\n          <SearchBar />\n          <PointList />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","export default {\n  state: [],\n  reducers: {\n    reoderPoints: (state, payload) => (state = payload),\n\n    addNewPoint: (state, payload) => {\n      state.push({\n        id: payload.newPointId,\n        coords: payload.coords,\n        adress: payload.adress,\n      });\n      return state;\n    },\n\n    deletePoint: (state, payload) => {\n      return state.filter(item => item.id !== payload);\n    },\n\n    replacePoint: (state, payload) => {\n      state[payload.arrIndex] = {\n        id: state[payload.arrIndex].id,\n        coords: payload.coords,\n        adress: payload.adress,\n      };\n    },\n  },\n\n  effects: dispatch => ({\n    async searchPoint(payload) {\n      window.ymaps.geocode(payload, { result: 1 }).then(res => {\n        const geoObj = res.geoObjects.get(0);\n        if (geoObj) {\n          this.addNewPoint({\n            adress: geoObj.getAddressLine(),\n            coords: geoObj.geometry.getCoordinates(),\n            newPointId: (Date.now() + Math.random()).toString(),\n          });\n        } else {\n          // if result not found\n        }\n      });\n      // .catch(error => {\n      //   dispatch({\n      //     type: NEW_POINT + FAIL,\n      //     error,\n      //   });\n      // });\n    },\n\n    async getNewCoords(payload) {\n      window.ymaps.geocode(payload.newCoords, { result: 1 }).then(res => {\n        const geoObj = res.geoObjects.get(0);\n        if (res) {\n          const adress = geoObj.getAddressLine() ? geoObj.getAddressLine() : `Address unknown`;\n          dispatch.points.replacePoint({\n            adress: adress,\n            coords: payload.newCoords,\n            arrIndex: payload.arrIndex,\n          });\n        } else {\n          // if result not found\n        }\n      });\n    },\n  }),\n};\n","import { init } from '@rematch/core';\nimport immerPlugin from '@rematch/immer';\nimport points from '../models/points';\n\nconst immer = immerPlugin();\n\nconst store = init({\n  models: {\n    points,\n  },\n  plugins: [immer],\n});\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport App from './components/app';\nimport store from './store';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}